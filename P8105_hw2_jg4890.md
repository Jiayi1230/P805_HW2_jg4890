P8105_hw2_jg4890
================
Jiayi Ge
2024-09-30

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Import data for Q1

``` r
nyc_data <- read_csv("./nyc_data.csv")
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Read and clean the data for Q1

``` r
nyc_clean <- nyc_data %>%
  select(Line, `Station Name`, `Station Latitude`, `Station Longitude`, Route1, Route2, Route3, Route4, Route5, Route6, Route7, Route8, Route9, Route10, Route11, `Entrance Type`, Entry, Vending, ADA)

nyc_clean <- nyc_clean %>%
  mutate(Entry = ifelse(Entry == "YES", TRUE, FALSE))

dim(nyc_clean) 
```

    ## [1] 1868   19

``` r
# Display (rows x columns) of the cleaned dataset

print(nyc_clean)
```

    ## # A tibble: 1,868 × 19
    ##    Line     `Station Name` `Station Latitude` `Station Longitude` Route1 Route2
    ##    <chr>    <chr>                       <dbl>               <dbl> <chr>  <chr> 
    ##  1 4 Avenue 25th St                      40.7               -74.0 R      <NA>  
    ##  2 4 Avenue 25th St                      40.7               -74.0 R      <NA>  
    ##  3 4 Avenue 36th St                      40.7               -74.0 N      R     
    ##  4 4 Avenue 36th St                      40.7               -74.0 N      R     
    ##  5 4 Avenue 36th St                      40.7               -74.0 N      R     
    ##  6 4 Avenue 45th St                      40.6               -74.0 R      <NA>  
    ##  7 4 Avenue 45th St                      40.6               -74.0 R      <NA>  
    ##  8 4 Avenue 45th St                      40.6               -74.0 R      <NA>  
    ##  9 4 Avenue 45th St                      40.6               -74.0 R      <NA>  
    ## 10 4 Avenue 53rd St                      40.6               -74.0 R      <NA>  
    ## # ℹ 1,858 more rows
    ## # ℹ 13 more variables: Route3 <chr>, Route4 <chr>, Route5 <chr>, Route6 <chr>,
    ## #   Route7 <chr>, Route8 <dbl>, Route9 <dbl>, Route10 <dbl>, Route11 <dbl>,
    ## #   `Entrance Type` <chr>, Entry <lgl>, Vending <chr>, ADA <lgl>

This orginal dataset contains key variables including, Division, Line,
Station Name, Station Latitude and Station Longitude, Routes (1-11),
Entrance Type(stair, elevator, easement or door), Exit Only, Entry
(whether entry is allowed), Vending (whether vending machines are
present), Entrance Type (the type of entrance or exit), and ADA (whether
the station is ADA compliant).

In the data cleaning process, several columns were retained, including
line, station name, latitude/longitude, routes, entry, vending, entrance
type, and ADA compliance. The Entry variable, which was initially in
character form (“YES” or “NO”), was converted to a logical variable
(TRUE or FALSE) for easier analysis. The dataset was checked for missing
values, and unnecessary columns were removed.

The resulting cleaned dataset has dimensions of 1868 rows and 19
columns, and it is considered tidy. Each variable represents a single
feature, and each row represents a unique station entrance or exit,
ensuring the data follows the principles of tidy data.

\*\* Answer the question in Q1 \*\*

``` r
distinct_stations <- nyc_clean %>%
  distinct(`Station Name`, Line) %>%
  nrow()
distinct_stations
```

    ## [1] 465

``` r
ada_compliant_stations <- nyc_clean %>%
  filter(ADA == TRUE) %>%
  distinct(`Station Name`, Line) %>%
  nrow()

ada_compliant_stations
```

    ## [1] 84

``` r
proportion_allow_entrance <- nyc_clean %>%
  filter(Vending == "NO") %>%
  summarise(proportion = mean(Entry == TRUE))

proportion_allow_entrance
```

    ## # A tibble: 1 × 1
    ##   proportion
    ##        <dbl>
    ## 1      0.377

There are 465 distinct stations, and 84 stations are ADA compliant.
0.377 of station entrances / exits without vending allow entrance.

\##Stations serve the A train

``` r
library(dplyr)
distinct_a_train_stations <- nyc_clean %>%
  filter(if_any(starts_with("Route"), ~ . == "A")) %>%  
  distinct(`Station Name`, Line) %>% 
  nrow()                                      

distinct_a_train_stations
```

    ## [1] 60

``` r
ada_compliant_a_train_stations <- nyc_clean %>%
  filter(if_any(starts_with("Route"), ~ . == "A")) %>%
  filter(ADA == "TRUE") %>%
  distinct(`Station Name`, Line) %>%
  nrow()

ada_compliant_a_train_stations
```

    ## [1] 17

60 distinct stations serve the A train, and 17 of them are ADA
compliant.
